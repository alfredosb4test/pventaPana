function limpiar_datos_insert(){$("#tr_cantidad").hide(),$("#txt_cj_codigo").attr("value","").focus(),$("#text_nombre_prod").empty(),$prod_existente=0,$eq=-1}function key_buscar_producto(a,b){var c=a||window.event,d=c.charCode||c.keyCode;13==d&&buscar_producto($(b).val())}function buscar_producto(a){return $id_sucursal=$("#lst_sucursales_admin_prod").val(),""==$id_sucursal?void $("#text_nombre_prod").html('<div class="msg alerta_err">Seleccione una Sucursal.</div>'):($prod_existente=0,$("#tr_cantidad").hide(),void $.ajax({type:"POST",contentType:"application/x-www-form-urlencoded",url:"crud_pventas.php",data:"accion=pastelero_buscar_producto&codigo="+a+"&id_sucursal="+$id_sucursal,beforeSend:function(){},success:function(b){var c=jQuery.parseJSON(b);if($("#ajax_respuesta").empty(),"existe"==c.status){var d;$prod_existente=1,$nombre_prod=c.nombre,$cantidad_org=c.cantidad,$("#text_nombre_prod").html('<div class="msg alerta_ok">'+$nombre_prod+"<strong> / Cantidad Actual ("+$cantidad_org+")</strong></div>"),$("#text_nombre_prod").attr("id_prod",c.id),$("#tr_cantidad").slideDown(),$("#txt_cj_codigo").attr("value","").focus(),$bar_cod!=a?d=0:d+=1,$("#select_cantidad option:eq("+d+")").prop("selected",!0),$("#select_cantidad").selectmenu("refresh"),$bar_cod=a}"no_existe"==c.status&&$("#text_nombre_prod").html('<div class="msg alerta_err">Producto no existente</div>'),"error_sql"==c.status&&$("#text_nombre_prod").html('<div class="msg alerta_err">Problemas con el SQL</div>')},timeout:9e4,error:function(){$("#ajax_respuesta").html('<div class="msg alerta_err">Problemas con el Servidor</div>')}}))}var $prod_existente=0,$cantidad_org=0,$nombre_prod="",$eq=-1,$bar_cod="";$(document).ready(function(a){$("#txt_cj_codigo").focus(),altura=$(window).height(),$("#btn_insert_list").button({text:!0,icons:{primary:"ui-icon-plusthick"}}).click(function(a){return 0==$prod_existente?void $("#text_nombre_prod").html('<div class="msg alerta_err">Los datos no son correctos.</div>'):($cantidad=$("#select_cantidad").val(),$id=$("#text_nombre_prod").attr("id_prod"),$txt_sucursal=$("#lst_sucursales_admin_prod option:selected").text(),void $.ajax({type:"POST",contentType:"application/x-www-form-urlencoded",url:"crud_pventas.php",data:"accion=sumar_cantidad_producto&id="+$id+"&cantidad="+$cantidad,beforeSend:function(){},success:function(a){var b=jQuery.parseJSON(a);"ok_update"==b.status&&(catidad_total=parseInt($cantidad_org)+parseInt($cantidad),$("#ajax_respuesta_insert").prepend('<div class="msg alerta_ok">Cantidad Agregada Correctamente. ('+$txt_sucursal+")<br><strong>Total:</strong> "+catidad_total+" - "+$nombre_prod+"</div>"),$("#select_cantidad option:eq(0)").prop("selected",!0),$("#select_cantidad").selectmenu("refresh"),limpiar_datos_insert()),"no_update"==b.tipo&&$("#ajax_respuesta_insert").prepend('<div class="msg alerta_err">Problemas con el Servidor</div>')},timeout:9e4,error:function(){$("#ajax_respuesta_insert").prepend('<div class="msg alerta_ok">Problemas con el servidor intente de nuevo.</div>')}}))}),$("#lst_sucursales_admin_prod").selectmenu({change:function(a,b){limpiar_datos_insert(),""==$id_sucursal}}),$("#select_cantidad").selectmenu({})});